<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="HoGent Bedrijf en Organisatie">
  <title>Besturingssystemen: Linux</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal.js/css/reveal.css">
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
  </style>
  <link rel="stylesheet" href="reveal.js/css/theme/hogent.css" id="theme">
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Besturingssystemen: Linux</h1>
  <p class="author">HoGent Bedrijf en Organisatie</p>
  <p class="date">2019-2020</p>
</section>

<section><section id="intro" class="title-slide slide level1"><h1>Intro</h1></section><section id="academiejaar-2019-2020" class="slide level2">
<h2>Academiejaar 2019-2020</h2>
<p>Lectoren:</p>
<ul>
<li>Nathalie Declercq</li>
<li>Thomas Pollet</li>
<li>Bert Van Vreckem</li>
</ul>
</section><section id="waarom-linux" class="slide level2">
<h2>Waarom Linux?</h2>
</section><section class="slide level2">

<blockquote>
<p>Ik ga sowieso geen systeem- en netwerkbeheer volgen, waarom moet ik me dan hier mee bezig houden?</p>
</blockquote>
</section><section id="linux-is-overal" class="slide level2">
<h2>Linux is overal</h2>
<p>… en je kan er gewoon niet meer omheen</p>
<ul>
<li>Grootste websites
<ul>
<li>webdev =&gt; jouw apps zullen op Linux draaien</li>
<li>e-business: Drupal</li>
</ul></li>
<li>MacOS X
<ul>
<li>Ook UNIX</li>
<li>Bash-shell + commando’s</li>
</ul></li>
</ul>
</section><section class="slide level2">

<ul>
<li>Moderne tools voor software release management
<ul>
<li>Continuous Integration/Delivery</li>
<li>Docker</li>
</ul></li>
<li>Embedded systemen
<ul>
<li>Arduino, Raspberry Pi, …</li>
<li>Multimedia-apparatuur, TV’s, NAS, …</li>
</ul></li>
</ul>
</section><section class="slide level2">

<blockquote>
<p>Ik wil me specialiseren in Windows. Linux interesseert mij niet</p>
</blockquote>
</section><section id="ook-in-de-windows-wereld" class="slide level2">
<h2>Ook in de Windows-wereld</h2>
<ul>
<li>Azure cloud platform draait &gt;50% Linux VMs</li>
<li>Microsoft loves Linux!</li>
</ul>
</section><section class="slide level2">

<blockquote>
<p>The ’70’s called, they want their terminal back!</p>
</blockquote>
</section><section id="de-kracht-van-de-cli" class="slide level2">
<h2>De kracht van de CLI</h2>
<ul>
<li>Command line interface (CLI) is de sleutel tot <strong>automatisering</strong>
<ul>
<li>Miljoenen servers beheren gaat niet via GUI</li>
<li>Ook in Windows ziet men dit nu in (PowerShell)</li>
</ul></li>
<li>CLI Instructies zijn <strong>bondiger</strong> en makkelijker reproduceerbaar dan GUI instructies</li>
</ul>
</section><section id="leerpad-linux" class="slide level2">
<h2>Leerpad Linux</h2>
<ul>
<li>Overzicht hoofdstukken</li>
<li>Per hoofdstuk:
<ul>
<li>Voorbereiding</li>
<li>Achtergrondinformatie</li>
<li>Slides</li>
<li>Oefeningen met oplossingen</li>
<li>Toetsingsvragen</li>
<li>Labo-opdrachten</li>
</ul></li>
</ul>
</section><section id="verloop-contactmoment" class="slide level2">
<h2>Verloop contactmoment</h2>
<ul>
<li>Klassikale instructie</li>
<li>Werken aan labo-oefeningen
<ul>
<li>individuele feedback</li>
<li>extra klassikale uitleg</li>
</ul></li>
<li>Korte intro volgende sessie</li>
</ul>
</section><section id="buiten-contactmomenten" class="slide level2">
<h2>Buiten contactmomenten</h2>
<ul>
<li>Bereid volgende sessie voor
<ul>
<li>Leerpad: voorbereiding, achtergrondinfo, toetsingsvragen</li>
</ul></li>
<li>Werk verder aan labo’s</li>
</ul>
</section><section class="slide level2">

<p>Van een sysadmin wordt <strong>zelfstandigheid</strong> verwacht</p>
<p>De werkwijze in deze cursus is een eerste stap in die richting!</p>
</section></section>
<section><section id="hoofdstuk-1.-linux-installeren" class="title-slide slide level1"><h1>Hoofdstuk 1. Linux installeren</h1></section><section id="laboverslagen-bijhouden" class="slide level2">
<h2>Laboverslagen bijhouden</h2>
<ul>
<li>Gebeurt ahv Github repo met startinfo</li>
<li>Ga naar Chamilo, klik door op link naar <em>classroom.github.com/…</em></li>
<li>Je krijgt persoonlijke, private Github-repo voor laboverslagen, scripts, …</li>
</ul>
</section><section id="software-downloaden" class="slide level2">
<h2>Software downloaden</h2>
<ul>
<li>Via de websites
<ul>
<li>Traag, WiFi overbelast</li>
</ul></li>
<li>GSCHB.4.037, GAARB.0.032
<ul>
<li>Bekabeld netwerk</li>
<li><a href="http://netlabfs/public/" class="uri">http://netlabfs/public/</a></li>
</ul></li>
<li>USB-stick doorgeven</li>
</ul>
</section><section id="linux-installeren" class="slide level2">
<h2>Linux installeren</h2>
<ol type="1">
<li>Installeer VirtualBox, Git client
<ul>
<li>Leerpad Besturingssystemen, 6.1 “Installatie Software”</li>
<li>Leerpad Linux, 1.2 “Achtergrondinformatie”</li>
</ul></li>
<li>Maak nieuwe VM voor Linux
<ul>
<li>Labo 1 - via leerpad (1.5) of Github repo</li>
<li>Volg de instructies!</li>
</ul></li>
<li>Installeer Fedora</li>
</ol>
</section></section>
<section><section id="hoofdstuk-2.-linux-leren-kennen" class="title-slide slide level1"><h1>Hoofdstuk 2. Linux leren kennen</h1></section><section id="hulp-zoeken-1" class="slide level2">
<h2>Hulp zoeken (1)</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># Hulp over het commando &#39;passwd&#39;</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="fu">man</span> passwd</a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co"># Hulp over het configuratiebestand /etc/passwd</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="fu">man</span> 5 passwd</a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co"># Zoek in alle man-pages naar de string &#39;passwd&#39;</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="fu">man</span> -k passwd</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="fu">apropos</span> passwd</a></code></pre></div>
</section><section id="hulp-zoeken-2" class="slide level2">
<h2>Hulp zoeken (2)</h2>
<ul>
<li>Binnen man-page:
<ul>
<li><code>q</code> - man-page verlaten</li>
<li><code>/</code> - zoeken binnen de pagina</li>
<li><code>n</code> - ga naar volgende zoekresultaat</li>
<li><code>N</code> - ga naar vorige zoekresultaat</li>
</ul></li>
<li>Secties, vb:
<ul>
<li>1 - commando’s</li>
<li>5 - configuratiebestanden</li>
<li>8 - systeembeheercommando’s</li>
<li>Notatie: vb. <code>passwd(1)</code>, <code>passwd(5)</code></li>
</ul></li>
</ul>
</section><section id="belangrijke-man-pages" class="slide level2">
<h2>Belangrijke man-pages</h2>
<p>… die niet over een commando gaan:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># directorystructuur Linux (Filesystem Hierarchy)</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="fu">man</span> hier</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co"># &quot;ingebouwde&quot; Bash commando&#39;s</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="fu">man</span> builtins</a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co"># &quot;wildcards&quot; in bestandsnamen (bv. *.*, [a-z])</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="fu">man</span> 7 glob</a></code></pre></div>
</section><section id="structuur-van-een-commandoregel" class="slide level2">
<h2>Structuur van een commandoregel</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1">$ <span class="ex">COMMANDO</span> [OPTIES]... [ARGUMENTEN]...</a></code></pre></div>
<ul>
<li>“Onderdelen” gescheiden door <strong>spaties</strong></li>
<li>1e woord = <strong>commando</strong></li>
<li><strong>Opties</strong> veranderen het gedrag van een commando
<ul>
<li>beginnen met streepje (<code>-</code> of <code>--</code>)</li>
</ul></li>
<li><strong>Argumenten</strong> zijn de entiteiten waarop het commando uitgevoerd wordt</li>
</ul>
</section><section id="commando" class="slide level2">
<h2>Commando</h2>
<p>Het eerste “woord” van een opdrachtregel moet een <strong>commando</strong> zijn</p>
<ul>
<li>Alias of functie, gedefinieerd door gebruiker</li>
<li>Ingebouwd in Bash (zie <code>man builtins</code>)</li>
<li>Uitvoerbaar bestand in één van de directories in <code>${PATH}</code></li>
<li>Absoluut pad naar uitvoerbaar bestand</li>
<li><code>which COMMANDO</code></li>
</ul>
<p><strong>Let op!</strong> Bash zoekt nooit in de huidige directory!</p>
</section><section id="opties" class="slide level2">
<h2>Opties</h2>
<p>Wijzigen het gedrag van het commando</p>
<ul>
<li>Korte notatie: <code>-a -b -c</code>
<ul>
<li>Korter schrijven als <code>-abc</code></li>
</ul></li>
<li>Lange notatie: <code>--foo --bar</code></li>
</ul>
<p><strong>Let op!</strong> Niet alle commando’s volgen de conventie! (bv <code>find</code>)</p>
</section><section id="substitutieexpansie-1" class="slide level2">
<h2>Substitutie/expansie (1)</h2>
<p>Vóór uitvoeren van een commando vervangt Bash bepaalde uitdrukkingen:</p>
<ul>
<li><em>Brace expansion</em>, vb. <code>{1..10}</code>, <code>dir/{subdir1,subdir2,subdir3}</code>
<ul>
<li>vb. <code>mkdir -p project/{src,lib,build}</code></li>
</ul></li>
<li><em>Tilde expansion</em>: <code>~</code> wordt vervangen door home-directory, vb. <code>/home/student/</code>
<ul>
<li>vb. <code>ls ~/.ssh</code></li>
</ul></li>
<li><em>Parameter expansion</em>: variabelennamen worden vervangen door waarde, vb. <code>${USER}</code> -&gt; <code>student</code></li>
</ul>
</section><section id="substitutieexpansie-2" class="slide level2">
<h2>Substitutie/expansie (2)</h2>
<ul>
<li><em>Command substitution</em>: <code>$(commando)</code> wordt vervangen door uitvoer van <code>commando</code>
<ul>
<li>vb. <code>date=$(date)</code></li>
</ul></li>
<li><em>Filename expansion</em> of “globbing”: wildcards in bestandsnamen, vb. <code>*</code>, <code>?</code>, <code>[abc]</code>, enz.
<ul>
<li>vb. <code>rm *.class</code></li>
</ul></li>
<li>…</li>
</ul>
</section><section id="resultaat-expansie" class="slide level2">
<h2>Resultaat expansie</h2>
<ul>
<li><code>set -x</code> toont resultaat van expansie (“debug mode”)</li>
<li><code>set +x</code> zet optie terug uit</li>
</ul>
<p>Voorbeeld:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">set</span> <span class="ex">-x</span><span class="kw">;</span> <span class="fu">ls</span> -ld <span class="va">${HOME}</span>/D[eo]*<span class="kw">;</span> <span class="kw">set</span> <span class="ex">+x</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="kw">set</span> <span class="ex">-x</span><span class="kw">;</span> <span class="fu">mkdir</span> -p a/<span class="dt">{b,c,d}</span>/<span class="dt">{e,f}</span><span class="kw">;</span> <span class="kw">set</span> <span class="ex">+x</span></a></code></pre></div>
</section><section id="linux-directorystructuur" class="slide level2">
<h2>Linux directorystructuur</h2>
<p><img data-src="https://linuxconfig.org/images/Directory-Filesystem-Hierarchy-Standard.jpg" /></p>
</section><section id="absoluutrelatief-pad" class="slide level2">
<h2>Absoluut/relatief pad</h2>
<ul>
<li><em>Absoluut</em> pad:
<ul>
<li>begint met <code>/</code></li>
<li>ten opzichte van ‘root directory’ <code>/</code></li>
<li>vb. <code>/home/student</code>, <code>/tmp</code>, <code>/var/www</code></li>
</ul></li>
<li><em>Relatief</em> pad:
<ul>
<li>begint <strong>niet</strong> met <code>/</code></li>
<li>ten opzichte van <strong>huidige</strong> directory (<code>pwd</code>)</li>
<li><code>ls Documents</code>, <code>mkdir linux</code></li>
</ul></li>
</ul>
</section><section id="speciale-directorynamen" class="slide level2">
<h2>Speciale directorynamen</h2>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>/</code></td>
<td style="text-align: left;">De “root directory”</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>.</code></td>
<td style="text-align: left;">De huidige directory (<code>pwd</code>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>..</code></td>
<td style="text-align: left;">De bovenliggende directory</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>~</code></td>
<td style="text-align: left;">Je “home-directory” (vb. <code>/home/student</code>)</td>
</tr>
</tbody>
</table>
<p><strong>Opm.</strong> De “home directory” van de gebruiker “root” is <code>/root</code></p>
</section><section id="werken-met-directories" class="slide level2">
<h2>Werken met directories</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Commando</th>
<th style="text-align: left;">Taak</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>pwd</code></td>
<td style="text-align: left;">Toon huidige directory</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>ls</code></td>
<td style="text-align: left;">Toon inhoud huidige directory</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>cd</code></td>
<td style="text-align: left;">Ga naar een andere directory</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>mkdir</code></td>
<td style="text-align: left;">Maak een subdirectory aan</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>rmdir</code></td>
<td style="text-align: left;">Verwijder een lege directory</td>
</tr>
</tbody>
</table>
</section><section id="werken-met-bestanden" class="slide level2">
<h2>Werken met bestanden</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Commando</th>
<th style="text-align: left;">Taak</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>cat</code></td>
<td style="text-align: left;">Toon inhoud van een bestand</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>less</code></td>
<td style="text-align: left;">Toon inhoud, per pagina (navigeer met pijltjes)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>touch</code></td>
<td style="text-align: left;">Maak leeg bestand aan</td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;">(eigenlijk: pas datum laatste wijziging aan)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>cp</code></td>
<td style="text-align: left;">Kopieer bestanden</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>mv</code></td>
<td style="text-align: left;">Verplaats bestanden (of hernoemen!)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>rm</code></td>
<td style="text-align: left;">Verwijder bestanden of directories</td>
</tr>
</tbody>
</table>
</section><section id="hoe-maak-je-een-bestand-aan" class="slide level2">
<h2>Hoe maak je een bestand aan?</h2>
<ol type="1">
<li>Met teksteditor Vi/Vim: <code>vim bestand.txt</code></li>
<li>Met teksteditor Nano: <code>nano bestand.txt</code></li>
<li>Leeg bestand: <code>touch bestand.txt</code></li>
</ol>
</section><section id="vim-survival-guide" class="slide level2">
<h2>Vim survival guide</h2>
<ul>
<li>Bij opstarten van Vim kom je terecht in <em>normal mode</em>.</li>
<li>Als je tekst wil invoeren moet je naar <em>insert mode</em>.</li>
</ul>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Taak</th>
<th style="text-align: left;">Commando</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Normal mode -&gt; insert mode</td>
<td style="text-align: left;"><code>i</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Insert mode -&gt; normal mode</td>
<td style="text-align: left;"><code>&lt;Esc&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Opslaan</td>
<td style="text-align: left;"><code>:w</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Opslaan en afsluiten</td>
<td style="text-align: left;"><code>:wq</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afsluiten zonder opslaan</td>
<td style="text-align: left;"><code>:q!</code></td>
</tr>
</tbody>
</table>
</section><section id="nano" class="slide level2">
<h2>Nano</h2>
<ul>
<li>Ook een command-line teksteditor</li>
<li>Iets toegankelijker dan Vim</li>
<li>Shortcuts staan onderaan het scherm
<ul>
<li>vb. Exit: <code>^X</code> -&gt; Ctrl+X</li>
</ul></li>
</ul>
</section><section id="archief-aanmaken" class="slide level2">
<h2>Archief aanmaken</h2>
<p>vgl. zip-bestand</p>
<pre class="console"><code>tar cjf documents.tar.bz2 Documents/
tar xf documents.tar.bz2</code></pre>
<ul>
<li><code>tar</code> = Tape ARchive</li>
<li>Opties:
<ul>
<li><em>c</em> - <em>C</em>reate</li>
<li><em>x</em> - e<em>X</em>tract</li>
<li><em>j</em> - compressie met bzip2</li>
<li><em>z</em> - compressie met g<em>Z</em>ip</li>
<li><em>f</em> - naam van het archiefbestand (<em>F</em>ile)</li>
<li><em>v</em> - toon uitgepakte bestanden (<em>V</em>erbose)</li>
</ul></li>
</ul>
</section></section>
<section><section id="hoofdstuk-3.-werken-met-tekst" class="title-slide slide level1"><h1>Hoofdstuk 3. Werken met tekst</h1></section><section id="tekst-afdrukken-met-echo" class="slide level2">
<h2>Tekst afdrukken met echo</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="bu">echo</span> <span class="st">&quot;Hallo wereld!&quot;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="bu">echo</span> <span class="st">&quot;Hallo </span><span class="va">${USER}</span><span class="st">!&quot;</span>  <span class="co"># variabelen gebruiken</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="bu">echo</span> <span class="st">&#39;Hallo ${USER}!&#39;</span>  <span class="co"># enkele aanhalingstekens!</span></a></code></pre></div>
</section><section id="tekst-afdrukken-met-printf" class="slide level2">
<h2>Tekst afdrukken met printf</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="bu">printf</span> <span class="st">&#39;Hallo wereld!\n&#39;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="bu">printf</span> <span class="st">&#39;Hallo %s!\n&#39;</span> <span class="st">&quot;</span><span class="va">${USER}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="bu">printf</span> <span class="st">&#39;Het gebruikers-ID van %s is %d\n&#39;</span> <span class="st">&quot;</span><span class="va">${USER}</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">${UID}</span><span class="st">&quot;</span> </a></code></pre></div>
<ul>
<li>vgl. <code>printf()</code> <a href="https://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf(java.lang.String,%20java.lang.Object...)">methode in Java</a>!</li>
<li>aangewezen in scripts, beter gedefinieerd dan <code>echo</code></li>
</ul>
</section><section id="input-en-output" class="slide level2">
<h2>Input en output</h2>
<p><img data-src="http://linux-training.be/funhtml/images/bash_stdin_stdout_stderr.svg" /></p>
<ul>
<li><em>stdin</em>, standard input
<ul>
<li>vgl. Java <code>System.in</code></li>
</ul></li>
<li><em>stdout</em>, standard output
<ul>
<li>vgl. <code>System.out</code></li>
</ul></li>
<li><em>stderr</em>, standard error
<ul>
<li>vgl. <code>System.err</code></li>
</ul></li>
</ul>
</section><section id="normaal-gedrag" class="slide level2">
<h2>Normaal gedrag</h2>
<ul>
<li><em>standard input</em>: invoer toetsenbord</li>
<li><em>standard output/error</em>: afdrukken op scherm (console)</li>
</ul>
<p><img data-src="http://linux-training.be/funhtml/images/bash_ioredirection_keyboard_display.png" /></p>
</section><section id="io-redirection-1" class="slide level2">
<h2>I/O Redirection (1)</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Syntax</th>
<th style="text-align: left;">Betekenis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>cmd &gt; file</code></td>
<td style="text-align: left;">schrijf uitvoer van <code>cmd</code> weg naar <code>file</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>cmd &gt;&gt; file</code></td>
<td style="text-align: left;">voeg toe aan einde van <code>file</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>cmd 2&gt; file</code></td>
<td style="text-align: left;">schrijf foutboodschappen van <code>cmd</code> weg naar <code>file</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>cmd &lt; file</code></td>
<td style="text-align: left;">gebruik inhoud van <code>file</code> als invoer voor <code>cmd</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>cmd1 | cmd2</code></td>
<td style="text-align: left;">gebruik uitvoer van <code>cmd1</code> als invoer voor <code>cmd2</code></td>
</tr>
</tbody>
</table>
</section><section id="io-redirection-2" class="slide level2">
<h2>I/O Redirection (2)</h2>
<p><code>cmd &gt; file</code></p>
<p><img data-src="http://linux-training.be/funhtml/images/bash_output_redirection.png" /></p>
</section><section id="io-redirection-3" class="slide level2">
<h2>I/O Redirection (3)</h2>
<p><code>cmd 2&gt; file</code></p>
<p><img data-src="http://linux-training.be/funhtml/images/bash_error_redirection.png" /></p>
</section><section id="combineren" class="slide level2">
<h2>Combineren</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="co"># stdout en stderr apart wegschrijven</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="fu">find</span> / -type d <span class="op">&gt;</span> directories.txt <span class="op">2&gt;</span> errors.txt</a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co"># stderr &quot;negeren&quot;</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="fu">find</span> / -type d <span class="op">&gt;</span> directories.txt <span class="op">2&gt;</span> /dev/null</a>
<a class="sourceLine" id="cb8-6" title="6"></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co"># stdout en stderr samen wegschrijven</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="fu">find</span> / -type d <span class="op">&gt;</span> all.txt <span class="op">2&gt;&amp;1</span></a>
<a class="sourceLine" id="cb8-9" title="9"></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co"># invoer én uitvoer omleiden</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="fu">sort</span> <span class="op">&lt;</span> unsorted.txt <span class="op">&gt;</span> sorted.txt <span class="op">2&gt;</span> errors.txt</a></code></pre></div>
</section><section id="foutboodschappen-afdrukken" class="slide level2">
<h2>Foutboodschappen afdrukken</h2>
<p>(Equivalent van <a href="https://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf(java.lang.String,%20java.lang.Object...)">System.err.printf()</a>)</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1"><span class="bu">printf</span> <span class="st">&#39;Error: %s is not a directory\n&#39;</span> <span class="st">&quot;</span><span class="va">${dir}</span><span class="st">&quot;</span> <span class="op">&gt;&amp;2</span></a></code></pre></div>
</section><section id="here-documents-1" class="slide level2">
<h2>Here documents (1)</h2>
<p>Als je meer dan één lijn wil afdrukken:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1"><span class="fu">cat</span> <span class="op">&lt;&lt; _EOF_</span></a>
<a class="sourceLine" id="cb10-2" title="2">Usage: <span class="va">${0}</span> [OPT]... [ARG]..</a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4">OPTIONS:</a>
<a class="sourceLine" id="cb10-5" title="5">  -h, --help  Print this help message</a>
<a class="sourceLine" id="cb10-6" title="6"></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="op">_EOF_</span></a></code></pre></div>
<p><em>Let op:</em> geen spaties toegelaten vóór de eindemarkering</p>
</section><section id="here-documents-2" class="slide level2">
<h2>Here documents (2)</h2>
<p>Dit kan bv. ook:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" title="1"><span class="ex">mysql</span> -uroot -p<span class="st">&quot;</span><span class="va">${db_password}</span><span class="st">&quot;</span> mysql <span class="op">&lt;&lt; _EOF_</span></a>
<a class="sourceLine" id="cb11-2" title="2">DROP DATABASE IF EXISTS drupal;</a>
<a class="sourceLine" id="cb11-3" title="3">CREATE DATABASE drupal;</a>
<a class="sourceLine" id="cb11-4" title="4">GRANT ALL PRIVILEGES ON drupal TO <span class="va">${drupal_usr}</span>@localhost</a>
<a class="sourceLine" id="cb11-5" title="5">  IDENTIFIED BY <span class="va">${drupal_password}</span>;</a>
<a class="sourceLine" id="cb11-6" title="6"><span class="op">_EOF_</span></a></code></pre></div>
</section><section id="filters" class="slide level2">
<h2>Filters</h2>
<ul>
<li>Filter = commando dat:
<ol type="1">
<li>leest van <code>stdin</code> of bestand,</li>
<li>tekst transformeert, en</li>
<li>wegschrijft naar <code>stdout</code></li>
</ol></li>
<li>Combineer filters via <code>|</code> (pipe) om complexe bewerkingen op tekst toe te passen
<ul>
<li>De <em>UNIX-filosofie</em></li>
</ul></li>
</ul>
</section><section id="filters-overzicht-1" class="slide level2">
<h2>Filters: overzicht (1)</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Commando</th>
<th style="text-align: left;">Doel</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>awk</code></td>
<td style="text-align: left;">Veelzijdige tool voor bewerken van tekst</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>cat</code></td>
<td style="text-align: left;">Druk inhoud bestand(en) af op stdout</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>cut</code></td>
<td style="text-align: left;">Selecteer “kolommen” uit tekstbestanden</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>fmt</code></td>
<td style="text-align: left;">Herformatteer tekst (bv. bepaald aantal kolommen)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>grep</code></td>
<td style="text-align: left;">Zoek ahv reguliere expressies naar tekstpatronen in bestanden</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>head</code></td>
<td style="text-align: left;">Toon de eerste regels van een tekstbestand</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>join</code></td>
<td style="text-align: left;">Voeg twee tekstbestanden samen ahv een gemeenschappelijke kolom</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>nl</code></td>
<td style="text-align: left;">Voeg regelnummers toe aan een bestand</td>
</tr>
</tbody>
</table>
</section><section id="filters-overzicht-2" class="slide level2">
<h2>Filters: overzicht (2)</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Commando</th>
<th style="text-align: left;">Doel</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>paste</code></td>
<td style="text-align: left;">Voeg twee tekstbestanden regel per regel samen</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>sed</code></td>
<td style="text-align: left;">Veelzijdige tool voor bewerken van tekst (Stream EDitor)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>sort</code></td>
<td style="text-align: left;">Sorteer tekst</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>tail</code></td>
<td style="text-align: left;">Toon de laatste regels van een tekstbestand</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>tr</code></td>
<td style="text-align: left;">Zoek en vervang lettertekens in tekst</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>uniq</code></td>
<td style="text-align: left;">Verwijder dubbele rijen uit een gesorteerd tekstbestand</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>wc</code></td>
<td style="text-align: left;">Tel karakters, woorden of lijnen in een tekstbestand</td>
</tr>
</tbody>
</table>
</section><section id="filters-voorbeelden" class="slide level2">
<h2>Filters: voorbeelden</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1"><span class="co"># Invoer uit bestand</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="fu">grep</span> <span class="st">&#39;Williams&#39;</span> tennis.txt</a>
<a class="sourceLine" id="cb12-3" title="3"><span class="fu">sort</span> -k2 tennis.txt</a>
<a class="sourceLine" id="cb12-4" title="4"></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co"># Invoer via stdin</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="fu">cat</span> tennis.txt <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;Williams&#39;</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="fu">cat</span> tennis.txt <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&#39;a-z&#39;</span> <span class="st">&#39;A-Z&#39;</span></a>
<a class="sourceLine" id="cb12-8" title="8"></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co"># Combinatie</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="fu">sort</span> music.txt <span class="kw">|</span> <span class="fu">uniq</span></a></code></pre></div>
</section><section id="sed-voorbeelden" class="slide level2">
<h2>Sed: voorbeelden</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># Zoeken en vervangen (1x per regel)</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="fu">sed</span> <span class="st">&#39;s/foo/bar/&#39;</span></a>
<a class="sourceLine" id="cb13-3" title="3"></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="co"># &quot;Globaal&quot;, meerdere keren per regel</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="fu">sed</span> <span class="st">&#39;s/foo/bar/g&#39;</span></a>
<a class="sourceLine" id="cb13-6" title="6"></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co"># Regels die beginnen met &#39;#&#39; verwijderen</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="fu">sed</span> <span class="st">&#39;/^#/d&#39;</span></a>
<a class="sourceLine" id="cb13-9" title="9"></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co"># Lege regels verwijderen</span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="fu">sed</span> <span class="st">&#39;/^$/d&#39;</span></a></code></pre></div>
</section><section id="awk-voorbeelden" class="slide level2">
<h2>Awk: voorbeelden</h2>
<p>Wat tussen accolades staat wordt uitgevoerd op elke regel</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># Druk 4e kolom af (afgebakend door &quot;whitespace&quot;)</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="fu">awk</span> <span class="st">&#39;{ print $4 }&#39;</span></a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co"># Enkel regels afdrukken die beginnen met #</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="fu">awk</span> <span class="st">&#39;/^#/ { print $0 }&#39;</span></a>
<a class="sourceLine" id="cb14-6" title="6"></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co"># Druk kolom 2 en 4 af, gescheiden door ;</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="fu">awk</span> <span class="st">&#39;{ printf &quot;%s;%s&quot;, $2, $4 }&#39;</span></a></code></pre></div>
</section></section>
<section><section id="hoofdstuk-4.-scripting-intro" class="title-slide slide level1"><h1>Hoofdstuk 4. Scripting: intro</h1></section><section id="vooraf-git-configuratie-1" class="slide level2">
<h2>Vooraf: Git configuratie (1)</h2>
<p>1 - Configureer Git in je VM</p>
<pre class="shell"><code>sudo dnf install git
git config --global user.name &quot;Voornaam Naam&quot;
git config --global user.email &quot;emailadres@student.hogent.be&quot;
git config --global push.default simple
git config --global pull.rebase true
git config --global core.autocrlf=input</code></pre>
</section><section id="vooraf-git-configuratie-2" class="slide level2">
<h2>Vooraf: Git configuratie (2)</h2>
<p>2 - Maak een sleutelpaar</p>
<pre class="shell"><code>ssh-keygen</code></pre>
<p>3 - Registreer publieke sleutel op Github</p>
<pre class="shell"><code>cat ~/.ssh/id_rsa.pub</code></pre>
<p>4 - Kloon Git-repo in je VM</p>
<pre class="shell"><code>git clone git@github.com:HoGentTIN/linux-1819-USERNAME.git</code></pre>
<p>met USERNAME jouw Github gebruikersnaam</p>
</section><section id="een-script-schrijven" class="slide level2">
<h2>Een script schrijven</h2>
<ol type="1">
<li><p>Maak bestand aan (bv. <code>script.sh</code>) met een teksteditor, bv.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb19-1" title="1"><span class="co">#! /bin/bash</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="bu">echo</span> <span class="st">&quot;Hallo </span><span class="va">${USER}</span><span class="st">&quot;</span></a></code></pre></div></li>
<li>Maak bestand uitvoerbaar: <code>chmod +x script.sh</code></li>
<li><p>Voer uit: <code>./script.sh</code></p></li>
</ol>
</section><section id="de-shebang" class="slide level2">
<h2>De “shebang”</h2>
<ul>
<li>Eerste regel van een script</li>
<li>Begint met <code>#!</code> (<code>#</code> = hash; <code>!</code> = bang)</li>
<li>Absoluut pad naar de interpreter voor het script, bv:
<ul>
<li><code>#! /usr/bin/python</code></li>
<li><code>#! /usr/bin/ruby</code></li>
<li><code>#! /usr/bin/env bash</code> (zoek in <code>${PATH}</code> naar <code>bash</code>)</li>
</ul></li>
</ul>
</section><section id="tekst-afdrukken" class="slide level2">
<h2>Tekst afdrukken</h2>
<p>Wat is het verschil?</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb20-1" title="1"><span class="va">var=</span><span class="st">&quot;world&quot;</span></a>
<a class="sourceLine" id="cb20-2" title="2"></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="bu">echo</span> <span class="st">&quot;Hello </span><span class="va">${var}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="bu">echo</span> <span class="st">&#39;Hello ${var}&#39;</span></a></code></pre></div>
</section><section class="slide level2">

<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb21-1" title="1"><span class="va">var=</span><span class="st">&quot;world&quot;</span></a>
<a class="sourceLine" id="cb21-2" title="2"></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="bu">echo</span> <span class="st">&quot;Hello </span><span class="va">${var}</span><span class="st">&quot;</span>    <span class="co"># Binnen &quot; &quot; wordt substitutie toegepast</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="bu">echo</span> <span class="st">&#39;Hello ${var}&#39;</span>    <span class="co"># Binnen &#39; &#39; NIET!</span></a></code></pre></div>
</section><section id="gebruik-printf" class="slide level2">
<h2>Gebruik <code>printf</code></h2>
<p><code>printf</code> is beter dan <code>echo</code></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb22-1" title="1"><span class="va">var=</span><span class="st">&quot;world&quot;</span></a>
<a class="sourceLine" id="cb22-2" title="2"></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="bu">printf</span> <span class="st">&#39;Hello %s\n&#39;</span> <span class="st">&quot;</span><span class="va">${var}</span><span class="st">&quot;</span></a></code></pre></div>
<ul>
<li>Het gedrag is beter gedefinieerd over verschillende UNIX-varianten.</li>
<li>Vgl. <code>printf()</code> method in Java!</li>
</ul>
</section><section id="fouten-opsporen-1" class="slide level2">
<h2>Fouten opsporen (1)</h2>
<ul>
<li>Werk altijd <strong>stap voor stap</strong></li>
<li><strong>Test</strong> voortdurend het resultaat van elke wijziging</li>
<li>Hou minstens <strong>2 vensters</strong> open naast elkaar:
<ul>
<li>Editor</li>
<li>Terminal voor testen</li>
</ul></li>
</ul>
</section><section id="fouten-opsporen-2" class="slide level2">
<h2>Fouten opsporen (2)</h2>
<ul>
<li>Syntax check: <code>bash -n script.sh</code></li>
<li>ShellCheck: <code>shellcheck script.sh</code>
<ul>
<li>Gebruik editor-plugin waar mogelijk</li>
</ul></li>
<li>Druk veel info af (<code>printf</code>)</li>
<li>Debug-mode:
<ul>
<li><code>bash -x script.sh</code></li>
<li>In het script: <code>set -x</code> en <code>set +x</code></li>
</ul></li>
</ul>
</section><section id="fouten-voorkomen" class="slide level2">
<h2>Fouten voorkomen</h2>
<p>Begin elk script met:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">set</span> <span class="ex">-o</span> errexit   <span class="co"># abort on nonzero exitstatus</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">set</span> <span class="ex">-o</span> nounset   <span class="co"># abort on unbound variable</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="kw">set</span> <span class="ex">-o</span> pipefail  <span class="co"># don&#39;t hide errors within pipes</span></a></code></pre></div>
</section><section id="variabelen" class="slide level2">
<h2>Variabelen</h2>
<p>Bash-variabelen zijn (meestal) strings.</p>
<ul>
<li>Declaratie: <code>variabele=waarde</code>
<ul>
<li><strong>geen</strong> spaties rond <code>=</code></li>
</ul></li>
<li>Waarde v/e variabele opvragen: <code>${variable}</code></li>
<li>Gebruik in strings (met dubbele aanhalingstekens):</li>
</ul>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb24-1" title="1"><span class="bu">echo</span> <span class="st">&quot;Hello </span><span class="va">${USER}</span><span class="st">&quot;</span></a></code></pre></div>
</section><section id="variabelen-tips" class="slide level2">
<h2>Variabelen: tips</h2>
<ul>
<li>Gebruik zoveel mogelijk de notatie <code>${var}</code>
<ul>
<li><em>accolades</em></li>
</ul></li>
<li>Gebruik dubbele aanhalingstekens: <code>&quot;${var}&quot;</code>
<ul>
<li>vermijd <em>splitsen</em> van woorden</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb25-1" title="1"><span class="va">bestand=</span><span class="st">&quot;Mijn bestand.txt&quot;</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="fu">touch</span> <span class="va">${bestand}</span>               <span class="co"># Fout</span></a>
<a class="sourceLine" id="cb25-3" title="3"><span class="fu">touch</span> <span class="st">&quot;</span><span class="va">${bestand}</span><span class="st">&quot;</span>             <span class="co"># Juist</span></a></code></pre></div>
</section><section class="slide level2">

<ul>
<li>Onbestaande variabele wordt beschouwd als <em>lege string</em>.
<ul>
<li>Oorzaak van veel fouten in shell-scripts!</li>
<li><code>set -o nounset</code> ⇒ script afbreken</li>
</ul></li>
</ul>
</section><section id="zichtbaarheid-variabelen-scope" class="slide level2">
<h2>Zichtbaarheid variabelen (scope)</h2>
<p>Enkel binnen zelfde “shell”, niet binnen “subshells”</p>
<ul>
<li>Een script oproepen creëert een subshell</li>
<li>Maak “globale”, of <em>omgevingsvariabele</em> met <code>export</code>:</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb26-1" title="1"><span class="bu">export</span> <span class="va">VARIABLE1=</span>value</a>
<a class="sourceLine" id="cb26-2" title="2"></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="va">VARIABLE2=</span>value</a>
<a class="sourceLine" id="cb26-4" title="4"><span class="bu">export</span> <span class="va">VARIABLE2</span></a></code></pre></div>
</section><section class="slide level2">

<p>Conventie naamgeving:</p>
<ul>
<li>Lokale variabelen: kleine letters, bv: <code>foo_bar</code></li>
<li>Omgevingsvariabelen: hoofdletters, bv. <code>FOO_BAR</code></li>
</ul>
</section></section>
<section><section id="hoofdstuk-5.-gebruikers-groepen-en-permissies" class="title-slide slide level1"><h1>Hoofdstuk 5. Gebruikers, groepen en permissies</h1></section><section id="commandos-voor-gebruikers-en-groepen" class="slide level2">
<h2>Commando’s voor gebruikers en groepen</h2>
<ul>
<li>Gebruikers: <code>useradd</code>, <code>usermod</code>, <code>userdel</code></li>
<li>Groepen: <code>groupadd</code>, <code>groupmod</code>, <code>groupdel</code></li>
<li>Info opvragen: <code>who</code>, <code>groups</code>, <code>id</code></li>
</ul>
</section><section id="configuratiebestanden" class="slide level2">
<h2>Configuratiebestanden</h2>
<ul>
<li>Gebruikers: <code>/etc/passwd</code>, <code>/etc/shadow</code></li>
<li>Groepen: <code>/etc/group</code>, (<code>/etc/gshadow</code>, van weinig belang)</li>
</ul>
</section><section id="primaire-vs-aanvullende-groepen" class="slide level2">
<h2>Primaire vs aanvullende groepen</h2>
<ul>
<li>Primaire groep: 4e veld van <code>/etc/passwd</code> (group ID)</li>
<li>Aanvullende groepen: in <code>/etc/group</code>. Gebruiker staat niet vermeld in de primaire groep!</li>
</ul>
</section><section class="slide level2">

<p><em>primaire</em> groep aanpassen</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb27-1" title="1"><span class="fu">sudo</span> usermod -g groep gebruiker</a></code></pre></div>
<p>gebruiker toevoegen aan opgegeven groepen <em>en verwijderen uit alle andere groepen</em></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb28-1" title="1"><span class="fu">sudo</span> usermod -G groep1,groep2 gebruiker</a></code></pre></div>
<p>gebruiker toevoegen aan opgegeven groep, blijft lid van andere groepen</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb29-1" title="1"><span class="fu">sudo</span> usermod -aG groep gebruiker</a></code></pre></div>
</section><section id="bestandspermissies-1" class="slide level2">
<h2>Bestandspermissies (1)</h2>
<p>= toegangsrechten voor bestanden en directories</p>
<ul>
<li>Bestanden zijn eigendom van een gebruiker en groep</li>
<li>cfr. <code>ls -l</code> voor een overzicht</li>
</ul>
</section><section id="bestandspermissies-2" class="slide level2">
<h2>Bestandspermissies (2)</h2>
<p>Instelbaar op niveau van:</p>
<ul>
<li><code>u</code>: gebruiker, <strong>u</strong>ser</li>
<li><code>g</code>: groep, <strong>g</strong>roup</li>
<li><code>o</code>: andere gebruikers, <strong>o</strong>thers</li>
<li><code>a</code>: iedereen, <strong>a</strong>ll</li>
</ul>
</section><section id="soorten-permissies" class="slide level2">
<h2>Soorten permissies</h2>
<ul>
<li><code>r</code>: lezen, <strong>r</strong>ead</li>
<li><code>w</code>: schrijven, <strong>w</strong>rite</li>
<li><code>x</code>: e<strong>x</strong>ecute
<ul>
<li>bestand: uitvoeren als commando</li>
<li>directory: toegang met <code>cd</code></li>
</ul></li>
</ul>
</section><section id="instellen-met-symbolische-notatie" class="slide level2">
<h2>Instellen met symbolische notatie</h2>
<p>permissies instellen met <code>chmod</code>, symbolische notatie</p>
<pre class="text"><code>chmod MODUS FILE
chmod u+r FILE
      g-w
      o=x
      a</code></pre>
<p>Voorbeelden:</p>
<ul>
<li><code>chmod g+rw bestand</code></li>
<li><code>chmod +x bestand</code></li>
<li><code>chmod u+rw,g+r,o-rw bestand</code></li>
<li><code>chmod a=r bestand</code></li>
</ul>
</section><section id="instellen-met-octale-notatie" class="slide level2">
<h2>Instellen met octale notatie</h2>
<pre class="text"><code>  u      g      o
r w x  r - x  - - -
1 1 1  1 0 1  0 0 0
4+2+1  4+0+1  0+0+0
  7      5      0</code></pre>
<p>Voorbeelden:</p>
<ul>
<li><code>chmod 755 script</code></li>
<li><code>chmod 600 file</code></li>
<li><code>chmod 644 file</code></li>
<li><code>chmod 775 dir</code></li>
</ul>
</section><section id="merk-op" class="slide level2">
<h2>Merk op</h2>
<ul>
<li>sommige permissie-combinaties komen nooit voor in de praktijk, bv. 1, 2, 3</li>
<li>directories: altijd lezen (r) en execute (x) <em>samen</em> toekennen of afnemen</li>
<li>permissies owner ≥ group ≥ others</li>
<li><code>root</code> negeert bestandspermissies (mag alles), vb. <code>/etc/shadow</code></li>
<li>tip: octale permissies opvragen: <code>stat -c %a BESTAND</code></li>
</ul>
</section><section id="permissies-van-nieuwe-bestanden-umask" class="slide level2">
<h2>Permissies van nieuwe bestanden: <code>umask</code></h2>
<ul>
<li><code>umask</code> bepaalt permissies van bestand/directory bij aanmaken</li>
<li>huidige waarde opvragen: <code>umask</code> zonder opties</li>
<li>opgegeven in octale notatie
<ul>
<li>enkel 0, 2 en 7 zijn zinvol</li>
</ul></li>
<li>welke permissies <em>afnemen</em>
<ul>
<li>bestand krijgt nooit execute-permissie</li>
</ul></li>
</ul>
</section><section id="voorbeeld-umask" class="slide level2">
<h2>Voorbeeld <code>umask</code></h2>
<p><code>umask 0027</code>, wat worden de permissies?</p>
<pre class="text"><code>  file      directory

  0 6 6 6     0 7 7 7      basis
- 0 0 2 7   - 0 0 2 7      umask
---------   ---------
  0 6 4 0     0 7 5 0      permissies</code></pre>
</section><section id="speciale-permissies-suid" class="slide level2">
<h2>Speciale permissies: <em>SUID</em></h2>
<ul>
<li>set user ID (<em>SUID</em>)</li>
<li>op bestanden met execute-permissies</li>
<li>tijdens uitvoeren krijgt de gebruiker de rechten van de eigenaar van het bestand</li>
<li>symbolisch: <code>u+s</code></li>
<li>octaal: 4</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb33-1" title="1">$ <span class="fu">ls</span> -l /bin/passwd</a>
<a class="sourceLine" id="cb33-2" title="2"><span class="ex">-rwsr-xr-x.</span> 1 root root 28k 2017-02-11 12:02 /bin/passwd</a></code></pre></div>
</section><section id="speciale-permissies-sgid" class="slide level2">
<h2>Speciale permissies: <em>SGID</em></h2>
<ul>
<li>set group ID (<em>SGID</em>)</li>
<li>op bestanden met execute-permissies</li>
<li>tijdens uitvoeren krijgt de gebruiker de rechten van de groep van het bestand</li>
<li>symbolisch: <code>g+s</code></li>
<li>octaal: 2</li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb34-1" title="1">$ <span class="fu">ls</span> -l /usr/bin/write </a>
<a class="sourceLine" id="cb34-2" title="2"><span class="ex">-rwxr-sr-x.</span> 1 root tty 20k 2017-09-22 10:55 /usr/bin/write</a></code></pre></div>
</section><section id="speciale-permissies-restricted-deletion" class="slide level2">
<h2>Speciale permissies: <em>restricted deletion</em></h2>
<ul>
<li>restricted deletion, of <em>sticky bit</em></li>
<li>toegepast op directories</li>
<li>een bestand mag in zo’n directory enkel door de eigenaar verwijderd worden</li>
<li>symbolisch: <code>+t</code></li>
<li>octaal: 1</li>
</ul>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb35-1" title="1"><span class="fu">ls</span> -ld /tmp</a>
<a class="sourceLine" id="cb35-2" title="2"><span class="ex">drwxrwxrwt.</span> 16 root root 360 2017-12-04 13:05 /tmp/</a></code></pre></div>
</section><section id="eigenaargroep-veranderen" class="slide level2">
<h2>Eigenaar/groep veranderen:</h2>
<p>Merk op: root-rechten nodig</p>
<pre class="console"><code>chown user file
chown user:group file
chgrp group file</code></pre>
</section></section>
<section><section id="hoofdstuk-6.-scripts-schrijven" class="title-slide slide level1"><h1>Hoofdstuk 6. Scripts schrijven</h1></section><section id="positionele-parameters" class="slide level2">
<h2>Positionele parameters</h2>
<p>Bij uitvoeren van script zijn opties en argumenten beschikbaar via variabelen, <em>positionele parameters</em></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Variabele</th>
<th style="text-align: left;">Betekenis</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>${0}</code></td>
<td style="text-align: left;">Naam script</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>${1}</code>, <code>${2}</code>, …</td>
<td style="text-align: left;">Eerste, tweede, … argument</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>${10}</code></td>
<td style="text-align: left;">Tiende argument (accolades verplicht!)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>${*}</code></td>
<td style="text-align: left;">Alle argumenten: <code>${1} ${2} ${3}...</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>${@}</code></td>
<td style="text-align: left;">Alle argumenten: <code>&quot;${1}&quot; &quot;${2}&quot; &quot;${3}&quot;...</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>${#}</code></td>
<td style="text-align: left;">Aantal positionele parameters</td>
</tr>
</tbody>
</table>
</section><section id="positionele-parameters-shift" class="slide level2">
<h2>Positionele parameters: shift</h2>
<p>Het commando <code>shift</code> schuift positionele parameters op naar links:</p>
<ul>
<li><code>${1}</code> verdwijnt</li>
<li><code>${2}</code> wordt <code>${1}</code></li>
<li><code>${3}</code> wordt <code>${2}</code></li>
<li>enz.</li>
</ul>
</section><section id="positionele-parameters-instellen" class="slide level2">
<h2>Positionele parameters instellen</h2>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">set</span> <span class="ex">par1</span> par2 par3</a>
<a class="sourceLine" id="cb37-2" title="2"><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${1}</span><span class="st">&quot;</span>  <span class="co">#  =&gt; par1</span></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${2}</span><span class="st">&quot;</span>  <span class="co">#  =&gt; par2</span></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${3}</span><span class="st">&quot;</span>  <span class="co">#  =&gt; par3</span></a>
<a class="sourceLine" id="cb37-5" title="5"><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${4}</span><span class="st">&quot;</span>  <span class="co">#  =&gt;       (lege string)</span></a></code></pre></div>
</section><section id="exit-status" class="slide level2">
<h2>Exit-status</h2>
<ul>
<li>Elk commando heeft een <em>exit-status</em>, numerieke waarde
<ul>
<li>Opvragen met <code>echo &quot;$?&quot;</code></li>
<li>0 =&gt; commando geslaagd, logische <em>true</em></li>
<li>1-255 =&gt; commando gefaald, logische <em>false</em></li>
</ul></li>
<li>Logische operatoren in Bash zijn gebaseerd op exit-status</li>
<li>Booleaanse variabelen <em>bestaan niet</em></li>
</ul>
</section><section id="logische-operatoren" class="slide level2">
<h2>Logische operatoren</h2>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">if</span> <span class="ex">COMMANDO</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb38-2" title="2">  <span class="co"># A</span></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="kw">else</span></a>
<a class="sourceLine" id="cb38-4" title="4">  <span class="co"># B</span></a>
<a class="sourceLine" id="cb38-5" title="5"><span class="kw">fi</span></a></code></pre></div>
<ul>
<li><code>A</code>-blok wordt uitgevoerd als exit-status van <code>COMMANDO</code> 0 is (geslaagd, TRUE)</li>
<li><code>B</code>-blok wordt uitgevoerd als exit-status van <code>COMMANDO</code> verschillend is van 0 (gefaald, FALSE)</li>
</ul>
</section><section id="het-commando-test" class="slide level2">
<h2>Het commando <code>test</code></h2>
<ul>
<li>Evalueren van logische expressies</li>
<li>Geeft geschikte exit-status
<ul>
<li>0 = TRUE</li>
<li>1 = FALSE</li>
</ul></li>
<li>Alias voor <code>test</code> is <code>[</code>
<ul>
<li><code>[</code> is een <em>commando</em>, geen “haakje” in de traditionele betekenis</li>
<li>spaties vóór en na!</li>
</ul></li>
</ul>
</section><section class="slide level2">

<div class="sourceCode" id="cb39"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb39-1" title="1"><span class="co"># Fout:</span></a>
<a class="sourceLine" id="cb39-2" title="2"><span class="ex">if</span>[<span class="va">$#</span>-eq 0]<span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb39-3" title="3">  <span class="bu">echo</span> <span class="st">&quot;Expected at least one argument&quot;</span></a>
<a class="sourceLine" id="cb39-4" title="4"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb39-5" title="5"></a>
<a class="sourceLine" id="cb39-6" title="6"><span class="co"># Juist:</span></a>
<a class="sourceLine" id="cb39-7" title="7"><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">${#}</span><span class="st">&quot;</span> <span class="ot">-eq</span> <span class="st">&quot;0&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb39-8" title="8">  <span class="bu">echo</span> <span class="st">&quot;Expected at least one argument&quot;</span></a>
<a class="sourceLine" id="cb39-9" title="9"><span class="kw">fi</span></a></code></pre></div>
</section><section id="if-1" class="slide level2">
<h2>If (1)</h2>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb40-1" title="1"><span class="kw">if</span> <span class="ex">EXPR</span></a>
<a class="sourceLine" id="cb40-2" title="2"><span class="kw">then</span></a>
<a class="sourceLine" id="cb40-3" title="3">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb40-4" title="4"><span class="kw">elif</span> <span class="ex">EXPR</span></a>
<a class="sourceLine" id="cb40-5" title="5">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb40-6" title="6"><span class="kw">else</span></a>
<a class="sourceLine" id="cb40-7" title="7">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb40-8" title="8"><span class="kw">fi</span></a></code></pre></div>
</section><section id="if-2" class="slide level2">
<h2>If (2)</h2>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb41-1" title="1"><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">${#}</span><span class="st">&quot;</span> <span class="ot">-gt</span> <span class="st">&#39;2&#39;</span><span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb41-2" title="2">  <span class="bu">printf</span> <span class="st">&#39;Expected at most 2 arguments, got %d\n&#39;</span> <span class="st">&quot;</span><span class="va">${#}</span><span class="st">&quot;</span> <span class="op">&gt;&amp;2</span></a>
<a class="sourceLine" id="cb41-3" title="3">  <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb41-4" title="4"><span class="kw">fi</span></a></code></pre></div>
</section><section id="while-lus" class="slide level2">
<h2>While-lus</h2>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb42-1" title="1"><span class="kw">while</span> <span class="ex">EXPR</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb42-2" title="2">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb42-3" title="3"><span class="kw">done</span></a></code></pre></div>
</section><section id="until-lus" class="slide level2">
<h2>Until-lus</h2>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb43-1" title="1"><span class="kw">until</span> <span class="ex">EXPR</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb43-2" title="2">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb43-3" title="3"><span class="kw">done</span></a></code></pre></div>
</section><section id="while-lus-met-teller" class="slide level2">
<h2>While lus met teller</h2>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb44-1" title="1"><span class="va">counter=</span>0</a>
<a class="sourceLine" id="cb44-2" title="2"></a>
<a class="sourceLine" id="cb44-3" title="3"><span class="kw">while</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">${counter}</span><span class="st">&quot;</span> <span class="ot">-le</span> <span class="st">&#39;10&#39;</span><span class="bu"> ]</span>; <span class="kw">do</span></a>
<a class="sourceLine" id="cb44-4" title="4">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${counter}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb44-5" title="5">  <span class="va">counter=$((</span>counter + 1<span class="va">))</span></a>
<a class="sourceLine" id="cb44-6" title="6"><span class="kw">done</span></a></code></pre></div>
<p><code>$(( ... ))</code> is <em>arithmetic expansion</em></p>
</section><section id="for-lus" class="slide level2">
<h2>For-lus</h2>
<p>Itereren over een lijst</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">for</span> <span class="ex">ITEM</span> in LIST<span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb45-2" title="2">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb45-3" title="3"><span class="kw">done</span></a></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb46-1" title="1"><span class="kw">for</span> <span class="fu">file</span> in *.md<span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb46-2" title="2">  <span class="bu">printf</span> <span class="st">&#39;Processing file %s\n&#39;</span> <span class="st">&quot;</span><span class="va">${file}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb46-3" title="3">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb46-4" title="4"><span class="kw">done</span></a></code></pre></div>
</section><section id="for-lus-met-teller-13" class="slide level2">
<h2>For-lus met teller (1/3)</h2>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">for</span> <span class="ex">i</span> in <span class="dt">{1..10}</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb47-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${i}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb47-3" title="3"><span class="kw">done</span></a></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb48-1" title="1"><span class="kw">for</span> <span class="ex">i</span> in <span class="dt">{2..20..2}</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb48-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${i}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb48-3" title="3"><span class="kw">done</span></a></code></pre></div>
</section><section id="for-lus-met-teller-23" class="slide level2">
<h2>For-lus met teller (2/3)</h2>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb49-1" title="1"><span class="kw">for</span> <span class="ex">i</span> in <span class="va">$(</span><span class="fu">seq</span> 1 10<span class="va">)</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb49-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${i}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb49-3" title="3"><span class="kw">done</span></a></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb50-1" title="1"><span class="kw">for</span> <span class="ex">i</span> in <span class="va">$(</span><span class="fu">seq</span> 2 2 20<span class="va">)</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb50-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${i}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb50-3" title="3"><span class="kw">done</span></a></code></pre></div>
</section><section id="for-lus-met-teller-33" class="slide level2">
<h2>For-lus met teller (3/3)</h2>
<p>“Klassieke” for-lus, komt slechts uitzonderlijk voor</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb51-1" title="1"><span class="kw">for</span> <span class="kw">((</span>i=0; i&lt;=10; i++<span class="kw">))</span>; <span class="kw">do</span></a>
<a class="sourceLine" id="cb51-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${i}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb51-3" title="3"><span class="kw">done</span></a></code></pre></div>
</section><section id="itereren-over-positionele-parameters-while" class="slide level2">
<h2>Itereren over positionele parameters (<code>while</code>)</h2>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb52-1" title="1"><span class="kw">while</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$#</span><span class="st">&quot;</span> <span class="ot">-gt</span> 0<span class="bu"> ]</span>; <span class="kw">do</span></a>
<a class="sourceLine" id="cb52-2" title="2">  <span class="bu">printf</span> <span class="st">&#39;Arg: %s\n&#39;</span> <span class="st">&quot;</span><span class="va">${1}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb52-3" title="3">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb52-4" title="4">  <span class="bu">shift</span></a>
<a class="sourceLine" id="cb52-5" title="5"><span class="kw">done</span></a></code></pre></div>
</section><section id="itereren-over-positionele-parameters-for" class="slide level2">
<h2>Itereren over positionele parameters (<code>for</code>)</h2>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb53-1" title="1"><span class="kw">for</span> <span class="ex">arg</span> in <span class="st">&quot;</span><span class="va">${@}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb53-2" title="2">  <span class="bu">printf</span> <span class="st">&#39;Arg: %s\n&#39;</span> <span class="st">&quot;</span><span class="va">${arg}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb53-3" title="3">  <span class="co"># ...</span></a>
<a class="sourceLine" id="cb53-4" title="4"><span class="kw">done</span></a></code></pre></div>
</section></section>
<section><section id="hoofdstuk-7.-een-webserver-installeren" class="title-slide slide level1"><h1>Hoofdstuk 7. Een webserver installeren</h1></section><section id="doelstelling" class="slide level2">
<h2>Doelstelling</h2>
<ul>
<li>LAMP-stack: <strong>L</strong>inux + <strong>A</strong>pache + <strong>M</strong>ariaDB + <strong>P</strong>HP</li>
<li>Installeren Wordpress</li>
<li>Website bekijken vanop het fysieke systeem</li>
</ul>
</section><section id="netwerkinstellingen-controleren" class="slide level2">
<h2>Netwerkinstellingen controleren</h2>
<p>Om Internettoegang mogelijk te maken zijn er 3 instellingen nodig:</p>
<ol type="1">
<li>IP-adres en subnetmasker</li>
<li>Default gateway</li>
<li>DNS-server</li>
</ol>
</section><section id="netwerkinstellingen-opvragen" class="slide level2">
<h2>Netwerkinstellingen opvragen</h2>
<ol type="1">
<li>IP-adress/netmask: <code>ip address</code> (<code>ip a</code>)</li>
<li>Default gateway: <code>ip route</code> (<code>ip r</code>)</li>
<li>DNS-server: <code>cat /etc/resolv.conf</code></li>
</ol>
</section><section id="wat-is-het-ip-adres-van" class="slide level2">
<h2>Wat is het IP-adres van…?</h2>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb54-1" title="1">$ <span class="ex">nslookup</span> www.hogent.be</a>
<a class="sourceLine" id="cb54-2" title="2">$ <span class="ex">dig</span> www.hogent.be</a></code></pre></div>
<p>Wat is <em>mijn publiek</em> IP-adres?</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb55-1" title="1">$ <span class="ex">curl</span> icanhazip.com</a>
<a class="sourceLine" id="cb55-2" title="2"><span class="ex">81.164.175.191</span></a></code></pre></div>
</section><section id="controleer-eerst-netwerkinstellingen" class="slide level2">
<h2>Controleer eerst netwerkinstellingen</h2>
<div class="sourceCode" id="cb56"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb56-1" title="1">$ <span class="ex">ip</span> -4 a</a>
<a class="sourceLine" id="cb56-2" title="2"><span class="ex">1</span>: lo: <span class="op">&lt;</span>LOOPBACK,UP,LOWER_UP<span class="op">&gt;</span> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</a>
<a class="sourceLine" id="cb56-3" title="3">    <span class="ex">inet</span> 127.0.0.1/8 scope host lo</a>
<a class="sourceLine" id="cb56-4" title="4">       <span class="ex">valid_lft</span> forever preferred_lft forever</a>
<a class="sourceLine" id="cb56-5" title="5"><span class="ex">2</span>: enp0s3: <span class="op">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="op">&gt;</span> mtu 1500 qdisc fq_codel state UP group default qlen 1000</a>
<a class="sourceLine" id="cb56-6" title="6">    <span class="ex">inet</span> 10.0.2.15/24 brd 10.0.2.255 scope global dynamic noprefixroute enp0s3</a>
<a class="sourceLine" id="cb56-7" title="7">       <span class="ex">valid_lft</span> 74751sec preferred_lft 74751sec</a>
<a class="sourceLine" id="cb56-8" title="8"><span class="ex">3</span>: enp0s8: <span class="op">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="op">&gt;</span> mtu 1500 qdisc fq_codel state UP group default qlen 1000</a>
<a class="sourceLine" id="cb56-9" title="9">    <span class="ex">inet</span> 192.168.56.101/24 brd 192.168.56.255 scope global dynamic noprefixroute enp0s8</a>
<a class="sourceLine" id="cb56-10" title="10">       <span class="ex">valid_lft</span> 1049sec preferred_lft 1049sec</a></code></pre></div>
</section><section id="netwerkinstellingen" class="slide level2">
<h2>Netwerkinstellingen</h2>
<ul>
<li><code>lo</code> (loopback): 127.0.0.1/8</li>
<li><code>enp0s3</code> (VirtualBox NAT interface): 10.0.2.15/24</li>
<li><code>enp0s8</code> (VirtualBox Host-only Adapter): 192.168.56.101/24</li>
</ul>
</section><section id="problemen-oplossen" class="slide level2">
<h2>Problemen oplossen</h2>
<ul>
<li>Geen <code>enp0s8</code> of geen/verkeerd IP-adres op <code>enp0s8</code>?</li>
<li>Volg instructies installatie VirtualBox:
<ul>
<li>Sluit VM af</li>
<li>Studiewijzer Besturingssystemen, §6.1, VirtualBox Configuratie</li>
<li>Hoofdvenster VirtualBox &gt; VM &gt; Details &gt; Network</li>
<li>Maak 2e adapter aan, sluit aan op Host-only netwerk</li>
<li>Start VM op</li>
</ul></li>
</ul>
</section><section id="installatie-software" class="slide level2">
<h2>Installatie software</h2>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb57-1" title="1">$ <span class="fu">sudo</span> dnf install mariadb-server wordpress phpMyAdmin</a></code></pre></div>
</section><section id="belangrijke-directories" class="slide level2">
<h2>Belangrijke directories</h2>
<ul>
<li><code>/etc/httpd/</code>: configuratie Apache
<ul>
<li><code>/etc/httpd/conf/httpd.conf</code></li>
<li><code>/etc/httpd/conf.d/*.conf</code></li>
</ul></li>
<li><code>/var/www/html/</code>: Apache DocumentRoot</li>
<li><code>/var/log/httpd/</code>: logbestanden
<ul>
<li><code>access_log</code></li>
<li><code>error_log</code></li>
</ul></li>
</ul>
</section><section id="services-opstarten" class="slide level2">
<h2>Services opstarten</h2>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb58-1" title="1">$ <span class="fu">sudo</span> systemctl start mariadb</a>
<a class="sourceLine" id="cb58-2" title="2">$ <span class="fu">sudo</span> systemctl enable mariadb</a>
<a class="sourceLine" id="cb58-3" title="3">$ <span class="fu">sudo</span> systemctl start httpd</a>
<a class="sourceLine" id="cb58-4" title="4">$ <span class="fu">sudo</span> systemctl enable httpd</a></code></pre></div>
<ul>
<li><code>start</code>: <em>nu</em> opstarten</li>
<li><code>enable</code>: automatisch opstarten bij <em>booten</em></li>
</ul>
</section><section id="test-de-services" class="slide level2">
<h2>Test de services</h2>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb59-1" title="1">$ <span class="ex">systemctl</span> status httpd</a>
<a class="sourceLine" id="cb59-2" title="2">$ <span class="ex">systemctl</span> status mariadb</a></code></pre></div>
<ul>
<li>Open webbrowser <em>op de VM</em>
<ul>
<li>surf naar <a href="http://localhost/" class="uri">http://localhost/</a></li>
</ul></li>
<li>PHP testen: maak bestand <code>/var/www/html/info.php</code></li>
<li>Surf naar: <a href="http://localhost/info.php" class="uri">http://localhost/info.php</a></li>
</ul>
<div class="sourceCode" id="cb60"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb60-1" title="1"><span class="kw">&lt;?php</span> <span class="fu">phpinfo</span><span class="ot">();</span> <span class="kw">?&gt;</span></a></code></pre></div>
</section><section id="logbestanden" class="slide level2">
<h2>Logbestanden</h2>
<p>Voorbeeld voor Apache:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb61-1" title="1">$ <span class="fu">sudo</span> journalctl</a>
<a class="sourceLine" id="cb61-2" title="2">$ <span class="fu">sudo</span> journalctl -u httpd</a>
<a class="sourceLine" id="cb61-3" title="3">$ <span class="fu">sudo</span> journalctl -flu httpd</a>
<a class="sourceLine" id="cb61-4" title="4">$ <span class="fu">sudo</span> tail -f /var/log/httpd/access_log</a>
<a class="sourceLine" id="cb61-5" title="5">$ <span class="fu">sudo</span> tail -f /var/log/httpd/error_log</a></code></pre></div>
</section><section id="website-vanaf-fysiek-systeem-bekijken" class="slide level2">
<h2>Website vanaf fysiek systeem bekijken</h2>
<ul>
<li>Controleer IP-adres VM: <code>ip a</code>
<ul>
<li>waarschijnlijk 192.168.56.101</li>
</ul></li>
<li>Open webbrowser <em>op fysiek systeem</em>
<ul>
<li>surf naar <a href="http://192.168.56.101/" class="uri">http://192.168.56.101/</a></li>
</ul></li>
</ul>
</section><section id="routering-vm-fysiek-systeem" class="slide level2">
<h2>Routering VM ⟷ fysiek systeem</h2>
<ul>
<li>Fysiek systeem → VM: <code>ping 192.168.56.101</code></li>
<li>VM → fysiek systeem: <code>ping 192.168.56.1</code></li>
</ul>
<p>Controleer instellingen Host-Only Netwerkinterface VirtualBox.</p>
</section><section id="firewall-instellingen-aanpassen" class="slide level2">
<h2>Firewall-instellingen aanpassen</h2>
<div class="sourceCode" id="cb62"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb62-1" title="1">$ <span class="fu">sudo</span> firewall-cmd --list-all  <span class="co"># = toon firewall-regels</span></a>
<a class="sourceLine" id="cb62-2" title="2">$ <span class="fu">sudo</span> firewall-cmd --add-service http --permanent</a>
<a class="sourceLine" id="cb62-3" title="3">$ <span class="fu">sudo</span> firewall-cmd --add-service https --permanent</a>
<a class="sourceLine" id="cb62-4" title="4">$ <span class="fu">sudo</span> firewall-cmd --reload</a></code></pre></div>
<p>Probeer opnieuw de website te bekijken vanaf het fysieke systeem</p>
</section><section id="database-beveiligen" class="slide level2">
<h2>Database beveiligen</h2>
<div class="sourceCode" id="cb63"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb63-1" title="1">$ <span class="fu">sudo</span> mysql_secure_installation</a></code></pre></div>
<ul>
<li>Volg de instructies!</li>
<li>kies MariaDB root-wachtwoord
<ul>
<li>≠ wachtwoord Linux root!</li>
</ul></li>
<li>bevestig andere vragen (ENTER)</li>
</ul>
<p><strong>Hou je wachtwoorden goed bij!</strong></p>
</section><section id="database-voor-wordpress-aanmaken" class="slide level2">
<h2>Database voor Wordpress aanmaken</h2>
<ul>
<li>Surf naar <a href="http://localhost/phpmyadmin/" class="uri">http://localhost/phpmyadmin/</a>, log in</li>
<li>Klik op “User accounts” → “Add user account”
<ul>
<li>User name: <code>wordpress</code></li>
<li>Host name: Local / <code>localhost</code></li>
<li>Password: kies er een of “Generate”</li>
</ul></li>
<li>Create database with same name and grant all privileges: <em>aanvinken</em></li>
<li>Ga naar onderaan de pagina, klik rechtsonder op “Go”</li>
</ul>
</section><section id="database-testen-root" class="slide level2">
<h2>Database testen: root</h2>
<div class="sourceCode" id="cb64"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb64-1" title="1">$ <span class="ex">mysql</span> -uroot -pR2rrbLV02TA1hAjN mysql</a>
<a class="sourceLine" id="cb64-2" title="2"><span class="ex">...</span></a>
<a class="sourceLine" id="cb64-3" title="3"><span class="ex">MariaDB</span> [mysql]<span class="op">&gt;</span> SHOW DATABASES<span class="kw">;</span></a>
<a class="sourceLine" id="cb64-4" title="4"><span class="ex">MariaDB</span> [mysql]<span class="op">&gt;</span> SELECT user,password from user<span class="kw">;</span></a>
<a class="sourceLine" id="cb64-5" title="5"><span class="ex">MariaDB</span> [mysql]<span class="op">&gt;</span> quit</a></code></pre></div>
<ul>
<li><code>-uroot</code>: inloggen als MariaDB-root</li>
<li><code>-pR2rrbLV02TA1hAjN</code>: gekozen wachtwoord
<ul>
<li>(GEEN spatie na <code>-p</code>)</li>
</ul></li>
<li><code>mysql</code>: inloggen op database <code>mysql</code></li>
</ul>
</section><section id="database-testen-wordpress" class="slide level2">
<h2>Database testen: wordpress</h2>
<div class="sourceCode" id="cb65"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb65-1" title="1">$ <span class="ex">mysql</span> -uwordpress -pPu7QxGKPlvEdw6Gr wordpress</a>
<a class="sourceLine" id="cb65-2" title="2"><span class="ex">...</span></a>
<a class="sourceLine" id="cb65-3" title="3"><span class="ex">MariaDB</span> [wordpress]<span class="op">&gt;</span> SHOW TABLES<span class="kw">;</span></a>
<a class="sourceLine" id="cb65-4" title="4"><span class="ex">MariaDB</span> [wordpress]<span class="op">&gt;</span> quit</a></code></pre></div>
</section><section id="wordpress-belangrijke-bestanden" class="slide level2">
<h2>Wordpress: Belangrijke bestanden</h2>
<ul>
<li><code>/usr/share/wordpress/</code>: installatie Wordpress</li>
<li><code>/etc/wordpress/wp-config.php</code>: configuratie</li>
<li><code>/etc/httpd/conf.d/wordpress.conf</code>: Apache-configuratie</li>
</ul>
</section><section id="wordpress-apache-configuratie" class="slide level2">
<h2>Wordpress: Apache-configuratie</h2>
<p>In <code>/etc/httpd/conf.d/wordpress.conf</code>:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode apache"><code class="sourceCode apache"><a class="sourceLine" id="cb66-1" title="1"><span class="co"># Zoek naar</span></a>
<a class="sourceLine" id="cb66-2" title="2">Require<span class="st"> local</span></a>
<a class="sourceLine" id="cb66-3" title="3"><span class="co"># Vervang door</span></a>
<a class="sourceLine" id="cb66-4" title="4">Require<span class="st"> all granted</span></a></code></pre></div>
<p>Daarna: <code>sudo sytemctl restart httpd</code></p>
</section><section id="wordpress-database-instellingen" class="slide level2">
<h2>Wordpress: database-instellingen</h2>
<p>In <code>/etc/wordpress/wp-config.php</code>:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb67-1" title="1"><span class="co">/** The name of the database for WordPress */</span></a>
<a class="sourceLine" id="cb67-2" title="2"><span class="fu">define</span><span class="ot">(</span><span class="st">&#39;DB_NAME&#39;</span><span class="ot">,</span> <span class="st">&#39;wordpress&#39;</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb67-3" title="3"></a>
<a class="sourceLine" id="cb67-4" title="4"><span class="co">/** MySQL database username */</span></a>
<a class="sourceLine" id="cb67-5" title="5"><span class="fu">define</span><span class="ot">(</span><span class="st">&#39;DB_USER&#39;</span><span class="ot">,</span> <span class="st">&#39;wordpress&#39;</span><span class="ot">);</span></a>
<a class="sourceLine" id="cb67-6" title="6"></a>
<a class="sourceLine" id="cb67-7" title="7"><span class="co">/** MySQL database password */</span></a>
<a class="sourceLine" id="cb67-8" title="8"><span class="fu">define</span><span class="ot">(</span><span class="st">&#39;DB_PASSWORD&#39;</span><span class="ot">,</span> <span class="st">&#39;Pu7QxGKPlvEdw6Gr&#39;</span><span class="ot">);</span></a></code></pre></div>
</section><section id="wordpress-keys-en-salts" class="slide level2">
<h2>Wordpress: Keys en Salts</h2>
<ul>
<li>Ga naar <a href="https://api.wordpress.org/secret-key/1.1/salt/" class="uri">https://api.wordpress.org/secret-key/1.1/salt/</a></li>
<li>Copy-paste naar <code>wp-config.php</code></li>
</ul>
</section><section id="wordpress-installatie-plugins-en-updates" class="slide level2">
<h2>Wordpress: installatie plugins en updates</h2>
<p>In <code>/etc/wordpress/wp-config.php</code>:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb68-1" title="1"><span class="co">/* ENABLE file changes */</span></a>
<a class="sourceLine" id="cb68-2" title="2"><span class="fu">define</span><span class="ot">(</span><span class="st">&#39;DISALLOW_FILE_MODS&#39;</span><span class="ot">,</span> <span class="kw">false</span><span class="ot">);</span></a></code></pre></div>
</section><section id="installatie-wordpress" class="slide level2">
<h2>Installatie Wordpress</h2>
<ul>
<li>Surf naar <a href="http://192.168.56.101/wordpress/" class="uri">http://192.168.56.101/wordpress/</a></li>
<li>Kies titel, gebruikersnaam, wachtwoord, enz.</li>
<li>Log in</li>
<li>Klaar!</li>
</ul>
</section></section>
<section><section id="hoofdstuk-8.-complexere-scripts" class="title-slide slide level1"><h1>Hoofdstuk 8. Complexere scripts</h1></section><section id="case-1" class="slide level2">
<h2>Case (1)</h2>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb69-1" title="1"><span class="kw">case</span> EXPR<span class="kw"> in</span></a>
<a class="sourceLine" id="cb69-2" title="2">  PATROON1<span class="kw">)</span></a>
<a class="sourceLine" id="cb69-3" title="3">    <span class="co"># ...</span></a>
<a class="sourceLine" id="cb69-4" title="4">    <span class="kw">;;</span></a>
<a class="sourceLine" id="cb69-5" title="5">  PATROON2<span class="kw">)</span></a>
<a class="sourceLine" id="cb69-6" title="6">    <span class="co"># ...</span></a>
<a class="sourceLine" id="cb69-7" title="7">    <span class="kw">;;</span></a>
<a class="sourceLine" id="cb69-8" title="8">  *<span class="kw">)</span></a>
<a class="sourceLine" id="cb69-9" title="9">    <span class="co"># ...</span></a>
<a class="sourceLine" id="cb69-10" title="10">    <span class="kw">;;</span></a>
<a class="sourceLine" id="cb69-11" title="11"><span class="kw">esac</span></a></code></pre></div>
</section><section id="case-2" class="slide level2">
<h2>Case (2)</h2>
<div class="sourceCode" id="cb70"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb70-1" title="1"><span class="va">option=</span><span class="st">&quot;</span><span class="va">${1}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb70-2" title="2"></a>
<a class="sourceLine" id="cb70-3" title="3"><span class="kw">case</span> <span class="st">&quot;</span><span class="va">${option}</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb70-4" title="4">  -h<span class="kw">|</span>--help<span class="kw">|</span>-?<span class="kw">)</span></a>
<a class="sourceLine" id="cb70-5" title="5">    <span class="ex">usage</span></a>
<a class="sourceLine" id="cb70-6" title="6">    <span class="bu">exit</span> 0</a>
<a class="sourceLine" id="cb70-7" title="7">    <span class="kw">;;</span></a>
<a class="sourceLine" id="cb70-8" title="8">  -v<span class="kw">|</span>--verbose<span class="kw">)</span></a>
<a class="sourceLine" id="cb70-9" title="9">    <span class="va">verbose=</span>y</a>
<a class="sourceLine" id="cb70-10" title="10">    <span class="bu">shift</span></a>
<a class="sourceLine" id="cb70-11" title="11">    <span class="kw">;;</span></a>
<a class="sourceLine" id="cb70-12" title="12">  *<span class="kw">)</span></a>
<a class="sourceLine" id="cb70-13" title="13">    <span class="bu">printf</span> <span class="st">&#39;Unrecognized option: %s\n&#39;</span> <span class="st">&quot;</span><span class="va">${option}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb70-14" title="14">    <span class="ex">usage</span></a>
<a class="sourceLine" id="cb70-15" title="15">    <span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb70-16" title="16">    <span class="kw">;;</span></a>
<a class="sourceLine" id="cb70-17" title="17"><span class="kw">esac</span></a></code></pre></div>
</section><section id="communicatie-scriptomgeving" class="slide level2">
<h2>Communicatie script/omgeving</h2>
<p>Informatie uitwisselen tussen script en omgeving:</p>
<ul>
<li>I/O: <code>stdin</code>, <code>stdout</code>, <code>stderr</code></li>
<li>Positionele parameters: <code>$1</code>, <code>$2</code>, enz.</li>
<li>Exit-status (0-255)</li>
<li>Omgevingsvariabelen, vb:</li>
</ul>
<div class="sourceCode" id="cb71"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb71-1" title="1"><span class="va">VAGRANT_LOG=</span>debug <span class="ex">vagrant</span> up</a></code></pre></div>
</section><section id="functies-in-bash" class="slide level2">
<h2>Functies in Bash</h2>
<div class="sourceCode" id="cb72"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb72-1" title="1"><span class="fu">functie_naam()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb72-2" title="2">    <span class="co"># code</span></a>
<a class="sourceLine" id="cb72-3" title="3"><span class="kw">}</span></a></code></pre></div>
<p>Een functie gedraagt zich als een script!</p>
<ul>
<li>oproepen: <code>functie_naam arg1 arg2 arg3</code></li>
<li>positionele parameters: <code>${1}</code>, <code>${2}</code>, enz.</li>
<li><code>return STATUS</code> ipv <code>exit</code></li>
</ul>
</section><section id="scope-variabelen-bij-functies" class="slide level2">
<h2>Scope variabelen bij functies</h2>
<p>Wat is de uitvoer van dit script?</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb73-1" title="1"><span class="co">#! /usr/bin/env bash</span></a>
<a class="sourceLine" id="cb73-2" title="2"><span class="va">var_a=</span>a</a>
<a class="sourceLine" id="cb73-3" title="3"></a>
<a class="sourceLine" id="cb73-4" title="4"><span class="fu">foo()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb73-5" title="5">  <span class="va">var_b=</span>b</a>
<a class="sourceLine" id="cb73-6" title="6">  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${var_a}</span><span class="st"> </span><span class="va">${var_b}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb73-7" title="7"><span class="kw">}</span></a>
<a class="sourceLine" id="cb73-8" title="8"></a>
<a class="sourceLine" id="cb73-9" title="9"><span class="ex">foo</span></a>
<a class="sourceLine" id="cb73-10" title="10"></a>
<a class="sourceLine" id="cb73-11" title="11"><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${var_a}</span><span class="st"> </span><span class="va">${var_b}</span><span class="st">&quot;</span></a></code></pre></div>
</section><section id="functies-in-bash-voorbeeld" class="slide level2">
<h2>Functies in Bash: voorbeeld</h2>
<div class="sourceCode" id="cb74"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb74-1" title="1"><span class="co"># Usage: copy_iso_to_usb ISO_FILE DEVICE</span></a>
<a class="sourceLine" id="cb74-2" title="2"><span class="co"># Copy an ISO file to a USB device, showing progress with pv (pipe viewer)</span></a>
<a class="sourceLine" id="cb74-3" title="3"><span class="co"># e.g. copy_iso_to_usb FedoraWorkstation.iso /dev/sdc</span></a>
<a class="sourceLine" id="cb74-4" title="4"><span class="fu">copy_iso_to_usb()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb74-5" title="5">  <span class="bu">local</span> <span class="va">iso=</span><span class="st">&quot;</span><span class="va">${1}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb74-6" title="6">  <span class="bu">local</span> <span class="va">destination=</span><span class="st">&quot;</span><span class="va">${2}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb74-7" title="7">  <span class="bu">local</span> <span class="va">iso_size</span></a>
<a class="sourceLine" id="cb74-8" title="8"></a>
<a class="sourceLine" id="cb74-9" title="9">  <span class="va">iso_size=$(</span><span class="fu">stat</span> -c <span class="st">&#39;%s&#39;</span> <span class="st">&quot;</span><span class="va">${iso}</span><span class="st">&quot;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb74-10" title="10"></a>
<a class="sourceLine" id="cb74-11" title="11">  <span class="bu">printf</span> <span class="st">&quot;Copying %s (%&#39;dB) to %s\n&quot;</span> \</a>
<a class="sourceLine" id="cb74-12" title="12">    <span class="st">&quot;</span><span class="va">${iso}</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">${iso_size}</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">${destination}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb74-13" title="13"></a>
<a class="sourceLine" id="cb74-14" title="14">  <span class="fu">dd</span> if=<span class="st">&quot;</span><span class="va">${iso}</span><span class="st">&quot;</span> \</a>
<a class="sourceLine" id="cb74-15" title="15">    <span class="kw">|</span> <span class="ex">pv</span> --size <span class="st">&quot;</span><span class="va">${iso_size}</span><span class="st">&quot;</span> \</a>
<a class="sourceLine" id="cb74-16" title="16">    <span class="kw">|</span> <span class="fu">sudo</span> dd of=<span class="st">&quot;</span><span class="va">${destination}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb74-17" title="17"><span class="kw">}</span></a></code></pre></div>
</section><section id="tips-1" class="slide level2">
<h2>Tips (1)</h2>
<ul>
<li>Begin elk script met <code>set -o ...</code></li>
<li>Zet positionele parameters om in beschrijvende namen</li>
<li>Maak lijnen niet te lang (gebruik <code>\</code> op het einde van een regel)</li>
<li>Gebruik “lange” opties: maakt script leesbaarder</li>
</ul>
<div class="sourceCode" id="cb75"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb75-1" title="1"><span class="kw">set</span> <span class="ex">-o</span> nounset  <span class="co"># stop bij onbestaande variabele</span></a>
<a class="sourceLine" id="cb75-2" title="2"><span class="kw">set</span> <span class="ex">-o</span> errexit  <span class="co"># stop bij fout (exitstatus ≠ 0) in commando</span></a>
<a class="sourceLine" id="cb75-3" title="3"><span class="kw">set</span> <span class="ex">-o</span> pipefail <span class="co"># stop bij fout in pipeline</span></a></code></pre></div>
</section><section id="tips-2" class="slide level2">
<h2>Tips (2)</h2>
<ul>
<li>Gebruik lokale variabelen in functies</li>
<li>Deel script op in (herbruikbare) functies</li>
</ul>
<p>Meer tips op: <a href="https://gitpitch.com/bertvv/presentation-clean-bash" class="uri">https://gitpitch.com/bertvv/presentation-clean-bash</a></p>
</section></section>
    </div>
  </div>

  <script src="reveal.js/lib/js/head.min.js"></script>
  <script src="reveal.js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Push each slide change to the browser history
        history: true,

        // Optional reveal.js plugins
        dependencies: [
          { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
          { src: 'reveal.js/plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
